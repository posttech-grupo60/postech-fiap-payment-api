"use strict";function cov_1h76z31q0n(){var path="C:\\postech-fiap-payment-api\\src\\repositories\\MongoDB\\MongoDBPaymentRepository.ts";var hash="caeb93fa9401ba2be8076a6c22d2b31b0e09593b";var global=new Function("return this")();var gcv="__coverage__";var coverageData={path:"C:\\postech-fiap-payment-api\\src\\repositories\\MongoDB\\MongoDBPaymentRepository.ts",statementMap:{"0":{start:{line:2,column:22},end:{line:4,column:1}},"1":{start:{line:3,column:4},end:{line:3,column:62}},"2":{start:{line:5,column:0},end:{line:5,column:62}},"3":{start:{line:6,column:18},end:{line:6,column:66}},"4":{start:{line:7,column:18},end:{line:7,column:46}},"5":{start:{line:10,column:8},end:{line:10,column:48}},"6":{start:{line:11,column:8},end:{line:11,column:57}},"7":{start:{line:12,column:8},end:{line:12,column:23}},"8":{start:{line:15,column:8},end:{line:25,column:9}},"9":{start:{line:16,column:28},end:{line:16,column:70}},"10":{start:{line:17,column:12},end:{line:17,column:31}},"11":{start:{line:18,column:12},end:{line:18,column:82}},"12":{start:{line:19,column:27},end:{line:19,column:101}},"13":{start:{line:20,column:12},end:{line:20,column:43}},"14":{start:{line:21,column:12},end:{line:21,column:43}},"15":{start:{line:24,column:12},end:{line:24,column:66}},"16":{start:{line:28,column:24},end:{line:28,column:82}},"17":{start:{line:29,column:8},end:{line:29,column:41}},"18":{start:{line:30,column:8},end:{line:31,column:58}},"19":{start:{line:31,column:12},end:{line:31,column:58}},"20":{start:{line:32,column:8},end:{line:32,column:45}},"21":{start:{line:35,column:0},end:{line:35,column:43}},"22":{start:{line:36,column:29},end:{line:42,column:1}},"23":{start:{line:37,column:20},end:{line:37,column:75}},"24":{start:{line:38,column:4},end:{line:38,column:29}},"25":{start:{line:39,column:4},end:{line:39,column:37}},"26":{start:{line:40,column:4},end:{line:40,column:31}},"27":{start:{line:41,column:4},end:{line:41,column:25}}},fnMap:{"0":{name:"(anonymous_0)",decl:{start:{line:2,column:56},end:{line:2,column:57}},loc:{start:{line:2,column:71},end:{line:4,column:1}},line:2},"1":{name:"(anonymous_1)",decl:{start:{line:9,column:4},end:{line:9,column:5}},loc:{start:{line:9,column:24},end:{line:13,column:5}},line:9},"2":{name:"(anonymous_2)",decl:{start:{line:14,column:4},end:{line:14,column:5}},loc:{start:{line:14,column:26},end:{line:26,column:5}},line:14},"3":{name:"(anonymous_3)",decl:{start:{line:27,column:4},end:{line:27,column:5}},loc:{start:{line:27,column:42},end:{line:33,column:5}},line:27},"4":{name:"(anonymous_4)",decl:{start:{line:36,column:29},end:{line:36,column:30}},loc:{start:{line:36,column:49},end:{line:42,column:1}},line:36}},branchMap:{"0":{loc:{start:{line:2,column:22},end:{line:4,column:1}},type:"binary-expr",locations:[{start:{line:2,column:23},end:{line:2,column:27}},{start:{line:2,column:31},end:{line:2,column:51}},{start:{line:2,column:56},end:{line:4,column:1}}],line:2},"1":{loc:{start:{line:3,column:11},end:{line:3,column:61}},type:"cond-expr",locations:[{start:{line:3,column:37},end:{line:3,column:40}},{start:{line:3,column:43},end:{line:3,column:61}}],line:3},"2":{loc:{start:{line:3,column:12},end:{line:3,column:33}},type:"binary-expr",locations:[{start:{line:3,column:12},end:{line:3,column:15}},{start:{line:3,column:19},end:{line:3,column:33}}],line:3},"3":{loc:{start:{line:21,column:19},end:{line:21,column:42}},type:"cond-expr",locations:[{start:{line:21,column:28},end:{line:21,column:35}},{start:{line:21,column:38},end:{line:21,column:42}}],line:21},"4":{loc:{start:{line:30,column:8},end:{line:31,column:58}},type:"if",locations:[{start:{line:30,column:8},end:{line:31,column:58}},{start:{line:30,column:8},end:{line:31,column:58}}],line:30}},s:{"0":0,"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0},f:{"0":0,"1":0,"2":0,"3":0,"4":0},b:{"0":[0,0,0],"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0]},inputSourceMap:{version:3,file:"C:/postech-fiap-payment-api/src/repositories/MongoDB/MongoDBPaymentRepository.ts",sources:["C:/postech-fiap-payment-api/src/repositories/MongoDB/MongoDBPaymentRepository.ts"],names:[],mappings:";;;;;AAAA,mEAA2C;AAC3C,+CAA2D;AAE3D,MAAqB,wBAAwB;IAEzC,KAAK,CAAC,IAAI,CAAC,OAAgB;QACxB,OAAO,CAAC,GAAG,CAAC,aAAa,GAAG,OAAO,CAAC,EAAE,CAAC,CAAC;QACvC,MAAM,IAAI,sBAAY,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;QACvC,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,OAAe;QACxB,IAAI,CAAC;YACH,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;YAC3D,OAAO,CAAC,GAAG,GAAG,IAAI,CAAC;YACnB,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,OAAO,CAAC,EAAE,GAAG,WAAW,GAAG,OAAO,CAAC,GAAG,CAAC,CAAA;YACrE,MAAM,MAAM,GAAG,MAAM,sBAAY,CAAC,gBAAgB,CAAC,EAAE,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;YAChF,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,MAAM,CAAC,CAAC;YAC/B,OAAO,MAAM,CAAC,CAAC,CAAE,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;QAElC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,IAAI,KAAK,CAAC,4BAA4B,GAAG,KAAK,CAAC,CAAC;QACxD,CAAC;IACL,CAAC;IAED,KAAK,CAAC,sBAAsB,CAAC,OAAe;QAC1C,MAAM,OAAO,GAAG,MAAM,sBAAY,CAAC,OAAO,CAAC,EAAE,OAAO,EAAG,OAAO,EAAE,CAAC,CAAC;QAClE,OAAO,CAAC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO;YAAE,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;QAC5D,OAAO,oBAAoB,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;CAGJ;AA9BD,2CA8BC;AACD,MAAM,oBAAoB,GAAG,KAAK,EAAE,QAAkB,EAAE,EAAE;IACxD,MAAM,OAAO,GAAG,IAAI,iBAAO,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC9D,OAAO,CAAC,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC;IACzB,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;IACjC,OAAO,CAAC,GAAG,GAAG,QAAQ,CAAC,GAAG,CAAA;IAC1B,OAAO,MAAM,OAAO,CAAC;AACvB,CAAC,CAAA",sourcesContent:["import Payment from \"../../entity/payment\";\r\nimport { IPayment, PaymentModel } from \"./schemas/Payment\";\r\n\r\nexport default class MongoDBPaymentrepository {\r\n\r\n    async save(payment: Payment): Promise<Payment> {\r\n       console.log(\"Parou aqui \" + payment.id);\r\n        await new PaymentModel(payment).save();\r\n        return payment;\r\n    }\r\n\r\n    async update(orderId: string) :  Promise<Payment | null> {\r\n        try {\r\n          const payment = await this.findByPaymentToOrderId(orderId);\r\n          payment.pay = true;\r\n          console.log('Payment Id = ' + payment.id + \" Dados = \" + payment.pay) \r\n          const result = await PaymentModel.findOneAndUpdate({ id: payment.id }, payment);\r\n          console.log(\"Dados \" + result);\r\n          return result ?  payment : null;\r\n          \r\n        } catch (error) {\r\n          throw new Error(\"Erro ao atualizar pedido: \" + error);\r\n        }\r\n    }\r\n\r\n    async findByPaymentToOrderId(orderId: string): Promise<Payment> {\r\n      const payment = await PaymentModel.findOne({ orderId : orderId });\r\n      console.log('Payment' + payment);\r\n      if (!payment) throw new Error(\"Payment to Order not found\");\r\n      return convertModelToObject(payment);\r\n    }\r\n\r\n   \r\n}\r\nconst convertModelToObject = async (iPayment: IPayment) => {\r\n  const payment = new Payment(iPayment.orderId, iPayment.price);\r\n  payment.id = iPayment.id;\r\n  payment.qrCode = iPayment.qrCode;\r\n  payment.pay = iPayment.pay  \r\n  return await payment;\r\n}\r\n"]},_coverageSchema:"1a1c01bbd47fc00a2c39e90264f33305004495a9",hash:"caeb93fa9401ba2be8076a6c22d2b31b0e09593b"};var coverage=global[gcv]||(global[gcv]={});if(!coverage[path]||coverage[path].hash!==hash){coverage[path]=coverageData;}var actualCoverage=coverage[path];{// @ts-ignore
cov_1h76z31q0n=function(){return actualCoverage;};}return actualCoverage;}cov_1h76z31q0n();var __importDefault=(cov_1h76z31q0n().s[0]++,(cov_1h76z31q0n().b[0][0]++,this)&&(cov_1h76z31q0n().b[0][1]++,this.__importDefault)||(cov_1h76z31q0n().b[0][2]++,function(mod){cov_1h76z31q0n().f[0]++;cov_1h76z31q0n().s[1]++;return(cov_1h76z31q0n().b[2][0]++,mod)&&(cov_1h76z31q0n().b[2][1]++,mod.__esModule)?(cov_1h76z31q0n().b[1][0]++,mod):(cov_1h76z31q0n().b[1][1]++,{"default":mod});}));cov_1h76z31q0n().s[2]++;Object.defineProperty(exports,"__esModule",{value:true});const payment_1=(cov_1h76z31q0n().s[3]++,__importDefault(require("../../entity/payment")));const Payment_1=(cov_1h76z31q0n().s[4]++,require("./schemas/Payment"));class MongoDBPaymentrepository{async save(payment){cov_1h76z31q0n().f[1]++;cov_1h76z31q0n().s[5]++;console.log("Parou aqui "+payment.id);cov_1h76z31q0n().s[6]++;await new Payment_1.PaymentModel(payment).save();cov_1h76z31q0n().s[7]++;return payment;}async update(orderId){cov_1h76z31q0n().f[2]++;cov_1h76z31q0n().s[8]++;try{const payment=(cov_1h76z31q0n().s[9]++,await this.findByPaymentToOrderId(orderId));cov_1h76z31q0n().s[10]++;payment.pay=true;cov_1h76z31q0n().s[11]++;console.log('Payment Id = '+payment.id+" Dados = "+payment.pay);const result=(cov_1h76z31q0n().s[12]++,await Payment_1.PaymentModel.findOneAndUpdate({id:payment.id},payment));cov_1h76z31q0n().s[13]++;console.log("Dados "+result);cov_1h76z31q0n().s[14]++;return result?(cov_1h76z31q0n().b[3][0]++,payment):(cov_1h76z31q0n().b[3][1]++,null);}catch(error){cov_1h76z31q0n().s[15]++;throw new Error("Erro ao atualizar pedido: "+error);}}async findByPaymentToOrderId(orderId){cov_1h76z31q0n().f[3]++;const payment=(cov_1h76z31q0n().s[16]++,await Payment_1.PaymentModel.findOne({orderId:orderId}));cov_1h76z31q0n().s[17]++;console.log('Payment'+payment);cov_1h76z31q0n().s[18]++;if(!payment){cov_1h76z31q0n().b[4][0]++;cov_1h76z31q0n().s[19]++;throw new Error("Payment to Order not found");}else{cov_1h76z31q0n().b[4][1]++;}cov_1h76z31q0n().s[20]++;return convertModelToObject(payment);}}cov_1h76z31q0n().s[21]++;exports.default=MongoDBPaymentrepository;cov_1h76z31q0n().s[22]++;const convertModelToObject=async iPayment=>{cov_1h76z31q0n().f[4]++;const payment=(cov_1h76z31q0n().s[23]++,new payment_1.default(iPayment.orderId,iPayment.price));cov_1h76z31q0n().s[24]++;payment.id=iPayment.id;cov_1h76z31q0n().s[25]++;payment.qrCode=iPayment.qrCode;cov_1h76z31q0n().s[26]++;payment.pay=iPayment.pay;cov_1h76z31q0n().s[27]++;return await payment;};//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiQzovcG9zdGVjaC1maWFwLXBheW1lbnQtYXBpL3NyYy9yZXBvc2l0b3JpZXMvTW9uZ29EQi9Nb25nb0RCUGF5bWVudFJlcG9zaXRvcnkudHMiLCJzb3VyY2VzIjpbIkM6L3Bvc3RlY2gtZmlhcC1wYXltZW50LWFwaS9zcmMvcmVwb3NpdG9yaWVzL01vbmdvREIvTW9uZ29EQlBheW1lbnRSZXBvc2l0b3J5LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiI7Ozs7O0FBQUEsbUVBQTJDO0FBQzNDLCtDQUEyRDtBQUUzRCxNQUFxQix3QkFBd0I7SUFFekMsS0FBSyxDQUFDLElBQUksQ0FBQyxPQUFnQjtRQUN4QixPQUFPLENBQUMsR0FBRyxDQUFDLGFBQWEsR0FBRyxPQUFPLENBQUMsRUFBRSxDQUFDLENBQUM7UUFDdkMsTUFBTSxJQUFJLHNCQUFZLENBQUMsT0FBTyxDQUFDLENBQUMsSUFBSSxFQUFFLENBQUM7UUFDdkMsT0FBTyxPQUFPLENBQUM7SUFDbkIsQ0FBQztJQUVELEtBQUssQ0FBQyxNQUFNLENBQUMsT0FBZTtRQUN4QixJQUFJLENBQUM7WUFDSCxNQUFNLE9BQU8sR0FBRyxNQUFNLElBQUksQ0FBQyxzQkFBc0IsQ0FBQyxPQUFPLENBQUMsQ0FBQztZQUMzRCxPQUFPLENBQUMsR0FBRyxHQUFHLElBQUksQ0FBQztZQUNuQixPQUFPLENBQUMsR0FBRyxDQUFDLGVBQWUsR0FBRyxPQUFPLENBQUMsRUFBRSxHQUFHLFdBQVcsR0FBRyxPQUFPLENBQUMsR0FBRyxDQUFDLENBQUE7WUFDckUsTUFBTSxNQUFNLEdBQUcsTUFBTSxzQkFBWSxDQUFDLGdCQUFnQixDQUFDLEVBQUUsRUFBRSxFQUFFLE9BQU8sQ0FBQyxFQUFFLEVBQUUsRUFBRSxPQUFPLENBQUMsQ0FBQztZQUNoRixPQUFPLENBQUMsR0FBRyxDQUFDLFFBQVEsR0FBRyxNQUFNLENBQUMsQ0FBQztZQUMvQixPQUFPLE1BQU0sQ0FBQyxDQUFDLENBQUUsT0FBTyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7UUFFbEMsQ0FBQztRQUFDLE9BQU8sS0FBSyxFQUFFLENBQUM7WUFDZixNQUFNLElBQUksS0FBSyxDQUFDLDRCQUE0QixHQUFHLEtBQUssQ0FBQyxDQUFDO1FBQ3hELENBQUM7SUFDTCxDQUFDO0lBRUQsS0FBSyxDQUFDLHNCQUFzQixDQUFDLE9BQWU7UUFDMUMsTUFBTSxPQUFPLEdBQUcsTUFBTSxzQkFBWSxDQUFDLE9BQU8sQ0FBQyxFQUFFLE9BQU8sRUFBRyxPQUFPLEVBQUUsQ0FBQyxDQUFDO1FBQ2xFLE9BQU8sQ0FBQyxHQUFHLENBQUMsU0FBUyxHQUFHLE9BQU8sQ0FBQyxDQUFDO1FBQ2pDLElBQUksQ0FBQyxPQUFPO1lBQUUsTUFBTSxJQUFJLEtBQUssQ0FBQyw0QkFBNEIsQ0FBQyxDQUFDO1FBQzVELE9BQU8sb0JBQW9CLENBQUMsT0FBTyxDQUFDLENBQUM7SUFDdkMsQ0FBQztDQUdKO0FBOUJELDJDQThCQztBQUNELE1BQU0sb0JBQW9CLEdBQUcsS0FBSyxFQUFFLFFBQWtCLEVBQUUsRUFBRTtJQUN4RCxNQUFNLE9BQU8sR0FBRyxJQUFJLGlCQUFPLENBQUMsUUFBUSxDQUFDLE9BQU8sRUFBRSxRQUFRLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDOUQsT0FBTyxDQUFDLEVBQUUsR0FBRyxRQUFRLENBQUMsRUFBRSxDQUFDO0lBQ3pCLE9BQU8sQ0FBQyxNQUFNLEdBQUcsUUFBUSxDQUFDLE1BQU0sQ0FBQztJQUNqQyxPQUFPLENBQUMsR0FBRyxHQUFHLFFBQVEsQ0FBQyxHQUFHLENBQUE7SUFDMUIsT0FBTyxNQUFNLE9BQU8sQ0FBQztBQUN2QixDQUFDLENBQUEiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgUGF5bWVudCBmcm9tIFwiLi4vLi4vZW50aXR5L3BheW1lbnRcIjtcclxuaW1wb3J0IHsgSVBheW1lbnQsIFBheW1lbnRNb2RlbCB9IGZyb20gXCIuL3NjaGVtYXMvUGF5bWVudFwiO1xyXG5cclxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgTW9uZ29EQlBheW1lbnRyZXBvc2l0b3J5IHtcclxuXHJcbiAgICBhc3luYyBzYXZlKHBheW1lbnQ6IFBheW1lbnQpOiBQcm9taXNlPFBheW1lbnQ+IHtcclxuICAgICAgIGNvbnNvbGUubG9nKFwiUGFyb3UgYXF1aSBcIiArIHBheW1lbnQuaWQpO1xyXG4gICAgICAgIGF3YWl0IG5ldyBQYXltZW50TW9kZWwocGF5bWVudCkuc2F2ZSgpO1xyXG4gICAgICAgIHJldHVybiBwYXltZW50O1xyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIHVwZGF0ZShvcmRlcklkOiBzdHJpbmcpIDogIFByb21pc2U8UGF5bWVudCB8IG51bGw+IHtcclxuICAgICAgICB0cnkge1xyXG4gICAgICAgICAgY29uc3QgcGF5bWVudCA9IGF3YWl0IHRoaXMuZmluZEJ5UGF5bWVudFRvT3JkZXJJZChvcmRlcklkKTtcclxuICAgICAgICAgIHBheW1lbnQucGF5ID0gdHJ1ZTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKCdQYXltZW50IElkID0gJyArIHBheW1lbnQuaWQgKyBcIiBEYWRvcyA9IFwiICsgcGF5bWVudC5wYXkpIFxyXG4gICAgICAgICAgY29uc3QgcmVzdWx0ID0gYXdhaXQgUGF5bWVudE1vZGVsLmZpbmRPbmVBbmRVcGRhdGUoeyBpZDogcGF5bWVudC5pZCB9LCBwYXltZW50KTtcclxuICAgICAgICAgIGNvbnNvbGUubG9nKFwiRGFkb3MgXCIgKyByZXN1bHQpO1xyXG4gICAgICAgICAgcmV0dXJuIHJlc3VsdCA/ICBwYXltZW50IDogbnVsbDtcclxuICAgICAgICAgIFxyXG4gICAgICAgIH0gY2F0Y2ggKGVycm9yKSB7XHJcbiAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoXCJFcnJvIGFvIGF0dWFsaXphciBwZWRpZG86IFwiICsgZXJyb3IpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBhc3luYyBmaW5kQnlQYXltZW50VG9PcmRlcklkKG9yZGVySWQ6IHN0cmluZyk6IFByb21pc2U8UGF5bWVudD4ge1xyXG4gICAgICBjb25zdCBwYXltZW50ID0gYXdhaXQgUGF5bWVudE1vZGVsLmZpbmRPbmUoeyBvcmRlcklkIDogb3JkZXJJZCB9KTtcclxuICAgICAgY29uc29sZS5sb2coJ1BheW1lbnQnICsgcGF5bWVudCk7XHJcbiAgICAgIGlmICghcGF5bWVudCkgdGhyb3cgbmV3IEVycm9yKFwiUGF5bWVudCB0byBPcmRlciBub3QgZm91bmRcIik7XHJcbiAgICAgIHJldHVybiBjb252ZXJ0TW9kZWxUb09iamVjdChwYXltZW50KTtcclxuICAgIH1cclxuXHJcbiAgIFxyXG59XHJcbmNvbnN0IGNvbnZlcnRNb2RlbFRvT2JqZWN0ID0gYXN5bmMgKGlQYXltZW50OiBJUGF5bWVudCkgPT4ge1xyXG4gIGNvbnN0IHBheW1lbnQgPSBuZXcgUGF5bWVudChpUGF5bWVudC5vcmRlcklkLCBpUGF5bWVudC5wcmljZSk7XHJcbiAgcGF5bWVudC5pZCA9IGlQYXltZW50LmlkO1xyXG4gIHBheW1lbnQucXJDb2RlID0gaVBheW1lbnQucXJDb2RlO1xyXG4gIHBheW1lbnQucGF5ID0gaVBheW1lbnQucGF5ICBcclxuICByZXR1cm4gYXdhaXQgcGF5bWVudDtcclxufVxyXG4iXX0=
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJuYW1lcyI6WyJjb3ZfMWg3NnozMXEwbiIsImFjdHVhbENvdmVyYWdlIiwicGF5bWVudF8xIiwicyIsIl9faW1wb3J0RGVmYXVsdCIsInJlcXVpcmUiLCJQYXltZW50XzEiLCJNb25nb0RCUGF5bWVudHJlcG9zaXRvcnkiLCJzYXZlIiwicGF5bWVudCIsImYiLCJjb25zb2xlIiwibG9nIiwiaWQiLCJQYXltZW50TW9kZWwiLCJ1cGRhdGUiLCJvcmRlcklkIiwiZmluZEJ5UGF5bWVudFRvT3JkZXJJZCIsInBheSIsInJlc3VsdCIsImZpbmRPbmVBbmRVcGRhdGUiLCJiIiwiZXJyb3IiLCJFcnJvciIsImZpbmRPbmUiLCJjb252ZXJ0TW9kZWxUb09iamVjdCIsImV4cG9ydHMiLCJkZWZhdWx0IiwiaVBheW1lbnQiLCJwcmljZSIsInFyQ29kZSJdLCJzb3VyY2VzIjpbIkM6L3Bvc3RlY2gtZmlhcC1wYXltZW50LWFwaS9zcmMvcmVwb3NpdG9yaWVzL01vbmdvREIvTW9uZ29EQlBheW1lbnRSZXBvc2l0b3J5LnRzIl0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBQYXltZW50IGZyb20gXCIuLi8uLi9lbnRpdHkvcGF5bWVudFwiO1xyXG5pbXBvcnQgeyBJUGF5bWVudCwgUGF5bWVudE1vZGVsIH0gZnJvbSBcIi4vc2NoZW1hcy9QYXltZW50XCI7XHJcblxyXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBNb25nb0RCUGF5bWVudHJlcG9zaXRvcnkge1xyXG5cclxuICAgIGFzeW5jIHNhdmUocGF5bWVudDogUGF5bWVudCk6IFByb21pc2U8UGF5bWVudD4ge1xyXG4gICAgICAgY29uc29sZS5sb2coXCJQYXJvdSBhcXVpIFwiICsgcGF5bWVudC5pZCk7XHJcbiAgICAgICAgYXdhaXQgbmV3IFBheW1lbnRNb2RlbChwYXltZW50KS5zYXZlKCk7XHJcbiAgICAgICAgcmV0dXJuIHBheW1lbnQ7XHJcbiAgICB9XHJcblxyXG4gICAgYXN5bmMgdXBkYXRlKG9yZGVySWQ6IHN0cmluZykgOiAgUHJvbWlzZTxQYXltZW50IHwgbnVsbD4ge1xyXG4gICAgICAgIHRyeSB7XHJcbiAgICAgICAgICBjb25zdCBwYXltZW50ID0gYXdhaXQgdGhpcy5maW5kQnlQYXltZW50VG9PcmRlcklkKG9yZGVySWQpO1xyXG4gICAgICAgICAgcGF5bWVudC5wYXkgPSB0cnVlO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coJ1BheW1lbnQgSWQgPSAnICsgcGF5bWVudC5pZCArIFwiIERhZG9zID0gXCIgKyBwYXltZW50LnBheSkgXHJcbiAgICAgICAgICBjb25zdCByZXN1bHQgPSBhd2FpdCBQYXltZW50TW9kZWwuZmluZE9uZUFuZFVwZGF0ZSh7IGlkOiBwYXltZW50LmlkIH0sIHBheW1lbnQpO1xyXG4gICAgICAgICAgY29uc29sZS5sb2coXCJEYWRvcyBcIiArIHJlc3VsdCk7XHJcbiAgICAgICAgICByZXR1cm4gcmVzdWx0ID8gIHBheW1lbnQgOiBudWxsO1xyXG4gICAgICAgICAgXHJcbiAgICAgICAgfSBjYXRjaCAoZXJyb3IpIHtcclxuICAgICAgICAgIHRocm93IG5ldyBFcnJvcihcIkVycm8gYW8gYXR1YWxpemFyIHBlZGlkbzogXCIgKyBlcnJvcik7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGFzeW5jIGZpbmRCeVBheW1lbnRUb09yZGVySWQob3JkZXJJZDogc3RyaW5nKTogUHJvbWlzZTxQYXltZW50PiB7XHJcbiAgICAgIGNvbnN0IHBheW1lbnQgPSBhd2FpdCBQYXltZW50TW9kZWwuZmluZE9uZSh7IG9yZGVySWQgOiBvcmRlcklkIH0pO1xyXG4gICAgICBjb25zb2xlLmxvZygnUGF5bWVudCcgKyBwYXltZW50KTtcclxuICAgICAgaWYgKCFwYXltZW50KSB0aHJvdyBuZXcgRXJyb3IoXCJQYXltZW50IHRvIE9yZGVyIG5vdCBmb3VuZFwiKTtcclxuICAgICAgcmV0dXJuIGNvbnZlcnRNb2RlbFRvT2JqZWN0KHBheW1lbnQpO1xyXG4gICAgfVxyXG5cclxuICAgXHJcbn1cclxuY29uc3QgY29udmVydE1vZGVsVG9PYmplY3QgPSBhc3luYyAoaVBheW1lbnQ6IElQYXltZW50KSA9PiB7XHJcbiAgY29uc3QgcGF5bWVudCA9IG5ldyBQYXltZW50KGlQYXltZW50Lm9yZGVySWQsIGlQYXltZW50LnByaWNlKTtcclxuICBwYXltZW50LmlkID0gaVBheW1lbnQuaWQ7XHJcbiAgcGF5bWVudC5xckNvZGUgPSBpUGF5bWVudC5xckNvZGU7XHJcbiAgcGF5bWVudC5wYXkgPSBpUGF5bWVudC5wYXkgIFxyXG4gIHJldHVybiBhd2FpdCBwYXltZW50O1xyXG59XHJcbiJdLCJtYXBwaW5ncyI6InV6T0FhVTtBQUFBQSxjQUFBLFNBQUFBLENBQUEsU0FBQUMsY0FBQSxXQUFBQSxjQUFBLEVBQUFELGNBQUEsRyxvZEFiVixNQUFBRSxTQUFBLEVBQUFGLGNBQUEsR0FBQUcsQ0FBQSxNQUFBQyxlQUFBLENBQUFDLE9BQUEsMkJBQ0EsTUFBQUMsU0FBQSxFQUFBTixjQUFBLEdBQUFHLENBQUEsTUFBQUUsT0FBQSx1QkFFQSxLQUFxQixDQUFBRSx3QkFBd0IsQ0FFekMsS0FBTSxDQUFBQyxJQUFJQSxDQUFDQyxPQUFnQixFQUFBVCxjQUFBLEdBQUFVLENBQUEsTUFBQVYsY0FBQSxHQUFBRyxDQUFBLE1BQ3hCUSxPQUFPLENBQUNDLEdBQUcsQ0FBQyxhQUFhLENBQUdILE9BQU8sQ0FBQ0ksRUFBRSxDQUFDLENBQUNiLGNBQUEsR0FBQUcsQ0FBQSxNQUN2QyxLQUFNLElBQUksQ0FBQUcsU0FBQSxDQUFBUSxZQUFZLENBQUNMLE9BQU8sQ0FBQyxDQUFDRCxJQUFJLEVBQUUsQ0FBQ1IsY0FBQSxHQUFBRyxDQUFBLE1BQ3ZDLE1BQU8sQ0FBQU0sT0FBTyxDQUNsQixDQUVBLEtBQU0sQ0FBQU0sTUFBTUEsQ0FBQ0MsT0FBZSxFQUFBaEIsY0FBQSxHQUFBVSxDQUFBLE1BQUFWLGNBQUEsR0FBQUcsQ0FBQSxNQUN4QixHQUFJLENBQ0YsS0FBTSxDQUFBTSxPQUFPLEVBQUFULGNBQUEsR0FBQUcsQ0FBQSxNQUFH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