{"C:\\postech-fiap-payment-api\\cucumber.js":{"path":"C:\\postech-fiap-payment-api\\cucumber.js","statementMap":{"0":{"start":{"line":1,"column":13},"end":{"line":7,"column":13}},"1":{"start":{"line":9,"column":0},"end":{"line":11,"column":1}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1},"f":{},"b":{},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"fb9a87ba95e7d0322174b574f386e415822bdd9d","contentHash":"8ea357597216d8175ae804efab8b7da5fa5afd21335bce1581482585ca5ad940"},"C:\\postech-fiap-payment-api\\src\\entity\\payment.ts":{"path":"C:\\postech-fiap-payment-api\\src\\entity\\payment.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":6,"column":8},"end":{"line":8,"column":10}},"2":{"start":{"line":7,"column":12},"end":{"line":7,"column":42}},"3":{"start":{"line":9,"column":8},"end":{"line":11,"column":10}},"4":{"start":{"line":10,"column":12},"end":{"line":10,"column":33}},"5":{"start":{"line":12,"column":8},"end":{"line":12,"column":31}},"6":{"start":{"line":13,"column":8},"end":{"line":13,"column":27}},"7":{"start":{"line":14,"column":8},"end":{"line":14,"column":29}},"8":{"start":{"line":17,"column":0},"end":{"line":17,"column":26}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":32},"end":{"line":15,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":6,"column":24},"end":{"line":6,"column":25}},"loc":{"start":{"line":6,"column":30},"end":{"line":8,"column":9}},"line":6},"2":{"name":"(anonymous_2)","decl":{"start":{"line":9,"column":28},"end":{"line":9,"column":29}},"loc":{"start":{"line":9,"column":40},"end":{"line":11,"column":9}},"line":9}},"branchMap":{},"s":{"0":1,"1":10,"2":0,"3":10,"4":3,"5":10,"6":10,"7":10,"8":1},"f":{"0":10,"1":0,"2":3},"b":{},"inputSourceMap":{"version":3,"file":"C:/postech-fiap-payment-api/src/entity/payment.ts","sources":["C:/postech-fiap-payment-api/src/entity/payment.ts"],"names":[],"mappings":";;AAEA,MAAqB,OAAO;IAIU,CAAC;IAGnC,YAAY,OAAe,EAAE,KAAa;QAM1C,aAAQ,GAAG,GAAG,EAAE;YACZ,IAAI,CAAC,EAAE,GAAG,MAAM,CAAC,UAAU,EAAE,CAAC;QAClC,CAAC,CAAA;QACD,iBAAY,GAAG,CAAC,MAAc,EAAE,EAAE;YAC9B,IAAI,CAAC,MAAM,GAAG,MAAM,CAAC;QACzB,CAAC,CAAA;QAVG,IAAI,CAAC,OAAO,GAAG,OAAO,CAAC;QACvB,IAAI,CAAC,KAAK,GAAG,KAAK,CAAC;QACnB,IAAI,CAAC,OAAO,GAAG,KAAK,CAAC;IACzB,CAAC;CAUJ;AArBD,0BAqBC","sourcesContent":["import { IPayment } from \"../repositories/MongoDB/schemas/Payment\";\r\n\r\nexport default class Payment {\r\n    id?: string | null | undefined;\r\n    orderId: string;\r\n    price: number;\r\n    qrCode: string | null | undefined;;\r\n    payment: boolean\r\n\r\n    constructor(orderId: string, price: number) {\r\n        this.orderId = orderId;\r\n        this.price = price; \r\n        this.payment = false;\r\n    }\r\n    \r\n    setNewId = () =>{\r\n        this.id = crypto.randomUUID();\r\n    }\r\n    setNewQrCode = (qrCode: string) => {\r\n        this.qrCode = qrCode;  \r\n    }\r\n    \r\n   \r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"f80d9f62581e4cf95785d1f079f8df090f268d3d","contentHash":"2f3b3f3ae7801c8e7613a20efa5ac7bd55658bed008f927b339abb3dabf21bb6"},"C:\\postech-fiap-payment-api\\src\\repositories\\MongoDB\\schemas\\Payment.ts":{"path":"C:\\postech-fiap-payment-api\\src\\repositories\\MongoDB\\schemas\\Payment.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":3,"column":0},"end":{"line":3,"column":30}},"2":{"start":{"line":4,"column":19},"end":{"line":4,"column":38}},"3":{"start":{"line":5,"column":22},"end":{"line":11,"column":2}},"4":{"start":{"line":12,"column":0},"end":{"line":12,"column":71}}},"fnMap":{},"branchMap":{},"s":{"0":1,"1":1,"2":1,"3":1,"4":1},"f":{},"b":{},"inputSourceMap":{"version":3,"file":"C:/postech-fiap-payment-api/src/repositories/MongoDB/schemas/Payment.ts","sources":["C:/postech-fiap-payment-api/src/repositories/MongoDB/schemas/Payment.ts"],"names":[],"mappings":";;;AAAA,uCAAyC;AAUzC,MAAM,aAAa,GAAG,IAAI,iBAAM,CAAW;IACzC,EAAE,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,MAAM,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE;IAC/C,OAAO,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAG,MAAM,EAAE,IAAI,EAAC;IACvD,KAAK,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACvC,MAAM,EAAE,EAAE,IAAI,EAAE,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE;IACxC,OAAO,EAAE,EAAE,IAAI,EAAE,OAAO,EAAE,QAAQ,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE;CACzD,CAAC,CAAC;AAEU,QAAA,YAAY,GAAG,IAAA,gBAAK,EAAW,SAAS,EAAE,aAAa,CAAC,CAAC","sourcesContent":["import { Schema, model } from \"mongoose\";\r\n\r\nexport interface IPayment {\r\n  id: string;\r\n  orderId: string;\r\n  price: number;\r\n  qrCode: string;\r\n  payment: boolean;\r\n}\r\n\r\nconst paymentSchema = new Schema<IPayment>({\r\n  id: { type: String, unique: true, index: true },\r\n  orderId: { type: String, required: true , unique: true},\r\n  price: { type: Number, required: true },\r\n  qrCode: { type: String, required: true },\r\n  payment: { type: Boolean, required: true, unique: true },\r\n});\r\n\r\nexport const PaymentModel = model<IPayment>(\"Payment\", paymentSchema);"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"a65d9ea12b84de6843b96b05f630ca5a4e2e640b","contentHash":"32b431e4e503dca5ef63fc2105626a095481d79ce2cd335180a3dad25725c393"},"C:\\postech-fiap-payment-api\\src\\repositories\\MongoDB\\MongoDBPaymentRepository.ts":{"path":"C:\\postech-fiap-payment-api\\src\\repositories\\MongoDB\\MongoDBPaymentRepository.ts","statementMap":{"0":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"1":{"start":{"line":3,"column":4},"end":{"line":3,"column":62}},"2":{"start":{"line":5,"column":0},"end":{"line":5,"column":62}},"3":{"start":{"line":6,"column":18},"end":{"line":6,"column":66}},"4":{"start":{"line":7,"column":18},"end":{"line":7,"column":46}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":57}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":23}},"7":{"start":{"line":14,"column":8},"end":{"line":24,"column":9}},"8":{"start":{"line":15,"column":28},"end":{"line":15,"column":70}},"9":{"start":{"line":16,"column":12},"end":{"line":16,"column":35}},"10":{"start":{"line":17,"column":12},"end":{"line":17,"column":86}},"11":{"start":{"line":18,"column":27},"end":{"line":18,"column":101}},"12":{"start":{"line":19,"column":12},"end":{"line":19,"column":43}},"13":{"start":{"line":20,"column":12},"end":{"line":20,"column":43}},"14":{"start":{"line":23,"column":12},"end":{"line":23,"column":66}},"15":{"start":{"line":27,"column":24},"end":{"line":27,"column":82}},"16":{"start":{"line":28,"column":8},"end":{"line":28,"column":41}},"17":{"start":{"line":29,"column":8},"end":{"line":30,"column":58}},"18":{"start":{"line":30,"column":12},"end":{"line":30,"column":58}},"19":{"start":{"line":31,"column":8},"end":{"line":31,"column":45}},"20":{"start":{"line":34,"column":0},"end":{"line":34,"column":43}},"21":{"start":{"line":35,"column":29},"end":{"line":41,"column":1}},"22":{"start":{"line":36,"column":20},"end":{"line":36,"column":75}},"23":{"start":{"line":37,"column":4},"end":{"line":37,"column":29}},"24":{"start":{"line":38,"column":4},"end":{"line":38,"column":37}},"25":{"start":{"line":39,"column":4},"end":{"line":39,"column":39}},"26":{"start":{"line":40,"column":4},"end":{"line":40,"column":25}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":2,"column":56},"end":{"line":2,"column":57}},"loc":{"start":{"line":2,"column":71},"end":{"line":4,"column":1}},"line":2},"1":{"name":"(anonymous_1)","decl":{"start":{"line":9,"column":4},"end":{"line":9,"column":5}},"loc":{"start":{"line":9,"column":24},"end":{"line":12,"column":5}},"line":9},"2":{"name":"(anonymous_2)","decl":{"start":{"line":13,"column":4},"end":{"line":13,"column":5}},"loc":{"start":{"line":13,"column":26},"end":{"line":25,"column":5}},"line":13},"3":{"name":"(anonymous_3)","decl":{"start":{"line":26,"column":4},"end":{"line":26,"column":5}},"loc":{"start":{"line":26,"column":42},"end":{"line":32,"column":5}},"line":26},"4":{"name":"(anonymous_4)","decl":{"start":{"line":35,"column":29},"end":{"line":35,"column":30}},"loc":{"start":{"line":35,"column":49},"end":{"line":41,"column":1}},"line":35}},"branchMap":{"0":{"loc":{"start":{"line":2,"column":22},"end":{"line":4,"column":1}},"type":"binary-expr","locations":[{"start":{"line":2,"column":23},"end":{"line":2,"column":27}},{"start":{"line":2,"column":31},"end":{"line":2,"column":51}},{"start":{"line":2,"column":56},"end":{"line":4,"column":1}}],"line":2},"1":{"loc":{"start":{"line":3,"column":11},"end":{"line":3,"column":61}},"type":"cond-expr","locations":[{"start":{"line":3,"column":37},"end":{"line":3,"column":40}},{"start":{"line":3,"column":43},"end":{"line":3,"column":61}}],"line":3},"2":{"loc":{"start":{"line":3,"column":12},"end":{"line":3,"column":33}},"type":"binary-expr","locations":[{"start":{"line":3,"column":12},"end":{"line":3,"column":15}},{"start":{"line":3,"column":19},"end":{"line":3,"column":33}}],"line":3},"3":{"loc":{"start":{"line":20,"column":19},"end":{"line":20,"column":42}},"type":"cond-expr","locations":[{"start":{"line":20,"column":28},"end":{"line":20,"column":35}},{"start":{"line":20,"column":38},"end":{"line":20,"column":42}}],"line":20},"4":{"loc":{"start":{"line":29,"column":8},"end":{"line":30,"column":58}},"type":"if","locations":[{"start":{"line":29,"column":8},"end":{"line":30,"column":58}},{"start":{"line":29,"column":8},"end":{"line":30,"column":58}}],"line":29}},"s":{"0":1,"1":1,"2":1,"3":1,"4":1,"5":3,"6":3,"7":1,"8":1,"9":1,"10":1,"11":1,"12":1,"13":1,"14":0,"15":3,"16":3,"17":3,"18":0,"19":3,"20":1,"21":1,"22":3,"23":3,"24":3,"25":3,"26":3},"f":{"0":1,"1":3,"2":1,"3":3,"4":3},"b":{"0":[1,1,1],"1":[1,0],"2":[1,1],"3":[0,1],"4":[0,3]},"inputSourceMap":{"version":3,"file":"C:/postech-fiap-payment-api/src/repositories/MongoDB/MongoDBPaymentRepository.ts","sources":["C:/postech-fiap-payment-api/src/repositories/MongoDB/MongoDBPaymentRepository.ts"],"names":[],"mappings":";;;;;AAAA,mEAA2C;AAC3C,+CAA2D;AAE3D,MAAqB,wBAAwB;IAEzC,KAAK,CAAC,IAAI,CAAC,OAAgB;QACvB,MAAM,IAAI,sBAAY,CAAC,OAAO,CAAC,CAAC,IAAI,EAAE,CAAC;QACvC,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,OAAe;QACxB,IAAI,CAAC;YACH,MAAM,OAAO,GAAG,MAAM,IAAI,CAAC,sBAAsB,CAAC,OAAO,CAAC,CAAC;YAC3D,OAAO,CAAC,OAAO,GAAG,IAAI,CAAC;YACvB,OAAO,CAAC,GAAG,CAAC,eAAe,GAAG,OAAO,CAAC,EAAE,GAAG,WAAW,GAAG,OAAO,CAAC,OAAO,CAAC,CAAA;YACzE,MAAM,MAAM,GAAG,MAAM,sBAAY,CAAC,gBAAgB,CAAC,EAAE,EAAE,EAAE,OAAO,CAAC,EAAE,EAAE,EAAE,OAAO,CAAC,CAAC;YAChF,OAAO,CAAC,GAAG,CAAC,QAAQ,GAAG,MAAM,CAAC,CAAC;YAC/B,OAAO,MAAM,CAAC,CAAC,CAAE,OAAO,CAAC,CAAC,CAAC,IAAI,CAAC;QAElC,CAAC;QAAC,OAAO,KAAK,EAAE,CAAC;YACf,MAAM,IAAI,KAAK,CAAC,4BAA4B,GAAG,KAAK,CAAC,CAAC;QACxD,CAAC;IACL,CAAC;IAED,KAAK,CAAC,sBAAsB,CAAC,OAAe;QAC1C,MAAM,OAAO,GAAG,MAAM,sBAAY,CAAC,OAAO,CAAC,EAAE,OAAO,EAAG,OAAO,EAAE,CAAC,CAAC;QAClE,OAAO,CAAC,GAAG,CAAC,SAAS,GAAG,OAAO,CAAC,CAAC;QACjC,IAAI,CAAC,OAAO;YAAE,MAAM,IAAI,KAAK,CAAC,4BAA4B,CAAC,CAAC;QAC5D,OAAO,oBAAoB,CAAC,OAAO,CAAC,CAAC;IACvC,CAAC;CAGJ;AA7BD,2CA6BC;AACD,MAAM,oBAAoB,GAAG,KAAK,EAAE,QAAkB,EAAE,EAAE;IACxD,MAAM,OAAO,GAAG,IAAI,iBAAO,CAAC,QAAQ,CAAC,OAAO,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC9D,OAAO,CAAC,EAAE,GAAG,QAAQ,CAAC,EAAE,CAAC;IACzB,OAAO,CAAC,MAAM,GAAG,QAAQ,CAAC,MAAM,CAAC;IACjC,OAAO,CAAC,OAAO,GAAG,QAAQ,CAAC,OAAO,CAAA;IAClC,OAAO,MAAM,OAAO,CAAC;AACvB,CAAC,CAAA","sourcesContent":["import Payment from \"../../entity/payment\";\r\nimport { IPayment, PaymentModel } from \"./schemas/Payment\";\r\n\r\nexport default class MongoDBPaymentrepository {\r\n\r\n    async save(payment: Payment): Promise<Payment> {\r\n        await new PaymentModel(payment).save();\r\n        return payment;\r\n    }\r\n\r\n    async update(orderId: string) :  Promise<Payment | null> {\r\n        try {\r\n          const payment = await this.findByPaymentToOrderId(orderId);\r\n          payment.payment = true;\r\n          console.log('Payment Id = ' + payment.id + \" Dados = \" + payment.payment) \r\n          const result = await PaymentModel.findOneAndUpdate({ id: payment.id }, payment);\r\n          console.log(\"Dados \" + result);\r\n          return result ?  payment : null;\r\n          \r\n        } catch (error) {\r\n          throw new Error(\"Erro ao atualizar pedido: \" + error);\r\n        }\r\n    }\r\n\r\n    async findByPaymentToOrderId(orderId: string): Promise<Payment> {\r\n      const payment = await PaymentModel.findOne({ orderId : orderId });\r\n      console.log('Payment' + payment);\r\n      if (!payment) throw new Error(\"Payment to Order not found\");\r\n      return convertModelToObject(payment);\r\n    }\r\n\r\n   \r\n}\r\nconst convertModelToObject = async (iPayment: IPayment) => {\r\n  const payment = new Payment(iPayment.orderId, iPayment.price);\r\n  payment.id = iPayment.id;\r\n  payment.qrCode = iPayment.qrCode;\r\n  payment.payment = iPayment.payment  \r\n  return await payment;\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"26c4d360f1ecba62a9f5468f058d5d96d7ab1442","contentHash":"2a5abed1416b7861295d6e7c10fb60a7e4096be10a0a678c1fe963382d83683e"},"C:\\postech-fiap-payment-api\\src\\repositories\\Memory\\InMemoryPaymentRepository.ts":{"path":"C:\\postech-fiap-payment-api\\src\\repositories\\Memory\\InMemoryPaymentRepository.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":5,"column":8},"end":{"line":5,"column":27}},"2":{"start":{"line":8,"column":8},"end":{"line":8,"column":36}},"3":{"start":{"line":9,"column":8},"end":{"line":9,"column":23}},"4":{"start":{"line":12,"column":8},"end":{"line":12,"column":29}},"5":{"start":{"line":15,"column":24},"end":{"line":15,"column":84}},"6":{"start":{"line":15,"column":56},"end":{"line":15,"column":83}},"7":{"start":{"line":16,"column":8},"end":{"line":17,"column":50}},"8":{"start":{"line":17,"column":12},"end":{"line":17,"column":50}},"9":{"start":{"line":18,"column":8},"end":{"line":18,"column":23}},"10":{"start":{"line":21,"column":22},"end":{"line":21,"column":73}},"11":{"start":{"line":21,"column":53},"end":{"line":21,"column":72}},"12":{"start":{"line":22,"column":8},"end":{"line":23,"column":51}},"13":{"start":{"line":23,"column":12},"end":{"line":23,"column":51}},"14":{"start":{"line":24,"column":8},"end":{"line":24,"column":39}},"15":{"start":{"line":25,"column":8},"end":{"line":25,"column":23}},"16":{"start":{"line":28,"column":0},"end":{"line":28,"column":44}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":4,"column":4},"end":{"line":4,"column":5}},"loc":{"start":{"line":4,"column":18},"end":{"line":6,"column":5}},"line":4},"1":{"name":"(anonymous_1)","decl":{"start":{"line":7,"column":4},"end":{"line":7,"column":5}},"loc":{"start":{"line":7,"column":24},"end":{"line":10,"column":5}},"line":7},"2":{"name":"(anonymous_2)","decl":{"start":{"line":11,"column":4},"end":{"line":11,"column":5}},"loc":{"start":{"line":11,"column":17},"end":{"line":13,"column":5}},"line":11},"3":{"name":"(anonymous_3)","decl":{"start":{"line":14,"column":4},"end":{"line":14,"column":5}},"loc":{"start":{"line":14,"column":35},"end":{"line":19,"column":5}},"line":14},"4":{"name":"(anonymous_4)","decl":{"start":{"line":15,"column":43},"end":{"line":15,"column":44}},"loc":{"start":{"line":15,"column":56},"end":{"line":15,"column":83}},"line":15},"5":{"name":"(anonymous_5)","decl":{"start":{"line":20,"column":4},"end":{"line":20,"column":5}},"loc":{"start":{"line":20,"column":26},"end":{"line":26,"column":5}},"line":20},"6":{"name":"(anonymous_6)","decl":{"start":{"line":21,"column":46},"end":{"line":21,"column":47}},"loc":{"start":{"line":21,"column":53},"end":{"line":21,"column":72}},"line":21}},"branchMap":{"0":{"loc":{"start":{"line":16,"column":8},"end":{"line":17,"column":50}},"type":"if","locations":[{"start":{"line":16,"column":8},"end":{"line":17,"column":50}},{"start":{"line":16,"column":8},"end":{"line":17,"column":50}}],"line":16},"1":{"loc":{"start":{"line":22,"column":8},"end":{"line":23,"column":51}},"type":"if","locations":[{"start":{"line":22,"column":8},"end":{"line":23,"column":51}},{"start":{"line":22,"column":8},"end":{"line":23,"column":51}}],"line":22}},"s":{"0":1,"1":1,"2":3,"3":3,"4":1,"5":3,"6":3,"7":3,"8":0,"9":3,"10":1,"11":1,"12":1,"13":0,"14":1,"15":1,"16":1},"f":{"0":1,"1":3,"2":1,"3":3,"4":3,"5":1,"6":1},"b":{"0":[0,3],"1":[0,1]},"inputSourceMap":{"version":3,"file":"C:/postech-fiap-payment-api/src/repositories/Memory/InMemoryPaymentRepository.ts","sources":["C:/postech-fiap-payment-api/src/repositories/Memory/InMemoryPaymentRepository.ts"],"names":[],"mappings":";;AAGA,MAAqB,yBAAyB;IAA9C;QACE,aAAQ,GAAc,EAAE,CAAC;IAqB3B,CAAC;IApBC,KAAK,CAAC,IAAI,CAAC,OAAgB;QACzB,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,OAAO,CAAC,CAAC;QAC5B,OAAO,OAAO,CAAC;IACjB,CAAC;IACD,KAAK,CAAC,IAAI;QACR,OAAO,IAAI,CAAC,QAAQ,CAAC;IACvB,CAAC;IAED,KAAK,CAAC,eAAe,CAAC,OAAsB;QAC1C,MAAM,OAAO,GAAG,IAAI,CAAC,QAAQ,CAAC,IAAI,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,OAAO,CAAC,OAAO,KAAK,OAAO,CAAC,CAAC;QAC7E,IAAI,CAAC,OAAO;YAAE,MAAM,IAAI,KAAK,CAAC,oBAAoB,CAAC,CAAC;QACpD,OAAO,OAAO,CAAC;IACjB,CAAC;IAED,KAAK,CAAC,MAAM,CAAC,OAAgB;QAC3B,MAAM,KAAK,GAAG,IAAI,CAAC,QAAQ,CAAC,SAAS,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,KAAK,OAAO,CAAC,EAAE,CAAC,CAAC;QAClE,IAAI,KAAK,KAAK,CAAC,CAAC;YAAE,MAAM,IAAI,KAAK,CAAC,qBAAqB,CAAC,CAAC;QACzD,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,GAAG,OAAO,CAAC;QAC/B,OAAO,OAAO,CAAC;IACjB,CAAC;CACF;AAtBD,4CAsBC","sourcesContent":["import Payment from \"../../entity/payment\";\r\n\r\n\r\nexport default class InMemoryPaymentrepository {\r\n  payments: Payment[] = [];\r\n  async save(payment: Payment): Promise<Payment> {\r\n    this.payments.push(payment);\r\n    return payment;\r\n  }\r\n  async list(): Promise<Payment[]> {\r\n    return this.payments;\r\n  }\r\n\r\n  async findByToOrderId(orderId: string | null): Promise<Payment> {\r\n    const payment = this.payments.find((payment) => payment.orderId === orderId);\r\n    if (!payment) throw new Error(\"Payment not found!\");\r\n    return payment;\r\n  }\r\n\r\n  async update(payment: Payment): Promise<Payment> {\r\n    const index = this.payments.findIndex((o) => o.id === payment.id);\r\n    if (index === -1) throw new Error(\"Paymnent not found!\");\r\n    this.payments[index] = payment;\r\n    return payment;\r\n  }\r\n}"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"4347a85044fd43fc87911797c0e58e3095b45144","contentHash":"9d9fc62b12c564fe00a6955668ae5617ff93a685e5fc5fe5d6693e66cce6580a"},"C:\\postech-fiap-payment-api\\src\\utils\\paymentUtil.ts":{"path":"C:\\postech-fiap-payment-api\\src\\utils\\paymentUtil.ts","statementMap":{"0":{"start":{"line":2,"column":0},"end":{"line":2,"column":62}},"1":{"start":{"line":6,"column":22},"end":{"line":6,"column":30}},"2":{"start":{"line":7,"column":8},"end":{"line":7,"column":28}},"3":{"start":{"line":8,"column":8},"end":{"line":8,"column":71}},"4":{"start":{"line":9,"column":8},"end":{"line":9,"column":30}},"5":{"start":{"line":10,"column":8},"end":{"line":10,"column":29}},"6":{"start":{"line":11,"column":8},"end":{"line":11,"column":73}},"7":{"start":{"line":12,"column":8},"end":{"line":12,"column":28}},"8":{"start":{"line":13,"column":8},"end":{"line":13,"column":69}},"9":{"start":{"line":14,"column":8},"end":{"line":14,"column":69}},"10":{"start":{"line":15,"column":8},"end":{"line":15,"column":30}},"11":{"start":{"line":16,"column":8},"end":{"line":16,"column":53}},"12":{"start":{"line":17,"column":8},"end":{"line":17,"column":81}},"13":{"start":{"line":18,"column":8},"end":{"line":18,"column":23}},"14":{"start":{"line":22,"column":27},"end":{"line":30,"column":9}},"15":{"start":{"line":31,"column":24},"end":{"line":31,"column":65}},"16":{"start":{"line":32,"column":8},"end":{"line":32,"column":86}},"17":{"start":{"line":33,"column":8},"end":{"line":33,"column":27}},"18":{"start":{"line":36,"column":0},"end":{"line":36,"column":30}}},"fnMap":{"0":{"name":"(anonymous_0)","decl":{"start":{"line":5,"column":4},"end":{"line":5,"column":5}},"loc":{"start":{"line":5,"column":41},"end":{"line":19,"column":5}},"line":5},"1":{"name":"(anonymous_1)","decl":{"start":{"line":21,"column":4},"end":{"line":21,"column":5}},"loc":{"start":{"line":21,"column":34},"end":{"line":34,"column":5}},"line":21}},"branchMap":{},"s":{"0":1,"1":3,"2":3,"3":3,"4":3,"5":3,"6":3,"7":3,"8":3,"9":3,"10":3,"11":3,"12":3,"13":3,"14":3,"15":3,"16":3,"17":3,"18":1},"f":{"0":3,"1":3},"b":{},"inputSourceMap":{"version":3,"file":"C:/postech-fiap-payment-api/src/utils/paymentUtil.ts","sources":["C:/postech-fiap-payment-api/src/utils/paymentUtil.ts"],"names":[],"mappings":";;AAEA,MAAqB,WAAW;IAG5B,kCAAkC;IAClC,KAAK,CAAC,kBAAkB,CAAC,UAAgB;QACrC,IAAI,OAAO,GAAG,QAAQ,CAAC,CAAC,oBAAoB;QAC5C,OAAO,IAAI,QAAQ,CAAC,CAAC,mBAAmB;QACxC,OAAO,IAAI,UAAU,GAAG,UAAU,CAAC,GAAG,CAAC,MAAM,GAAG,UAAU,CAAC,GAAG,CAAC,CAAC,YAAY;QAC5E,OAAO,IAAI,UAAU,CAAC,CAAC,4BAA4B;QACnD,OAAO,IAAI,SAAS,CAAC,CAAC,oCAAoC;QAC1D,OAAO,IAAI,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,MAAM,GAAG,UAAU,CAAC,MAAM,CAAC,CAAC,qBAAqB;QACvF,OAAO,IAAI,QAAQ,CAAC,CAAC,iBAAiB;QACtC,OAAO,IAAI,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,iCAAiC;QAC/F,OAAO,IAAI,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,MAAM,GAAG,UAAU,CAAC,IAAI,CAAC,CAAC,SAAS;QACvE,OAAO,IAAI,UAAU,CAAC,CAAC,iCAAiC;QACxD,OAAO,IAAI,MAAM,GAAG,UAAU,CAAC,aAAa,CAAC,CAAC,6BAA6B;QAC3E,OAAO,IAAI,IAAI,GAAG,UAAU,CAAC,WAAW,CAAC,MAAM,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC,yBAAyB;QAEnG,OAAO,OAAO,CAAC;IACnB,CAAC;IAED,8BAA8B;IAC9B,KAAK,CAAC,cAAc,CAAC,OAAgB;QACjC,MAAM,UAAU,GAAG;YACf,OAAO,EAAE,GAAG;YACZ,GAAG,EAAE,oBAAoB;YACzB,IAAI,EAAE,MAAM;YACZ,IAAI,EAAE,WAAW;YACjB,aAAa,EAAE,aAAa;YAC5B,MAAM,EAAE,OAAO,CAAC,KAAK;YACrB,WAAW,EAAE,sBAAsB,GAAG,OAAO,CAAC,OAAO;SACxD,CAAC;QACF,MAAM,OAAO,GAAG,MAAO,IAAI,CAAC,kBAAkB,CAAC,UAAU,CAAC,CAAC;QAC3D,IAAI,CAAC,MAAM,GAAG,QAAQ,GAAG,OAAO,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,QAAQ,CAAC,CAAC,EAAE,GAAG,CAAC,GAAG,OAAO,CAAC;QAE9E,OAAO,IAAI,CAAC,MAAM,CAAC;IACvB,CAAC;CACJ;AArCD,8BAqCC","sourcesContent":["import Payment from \"../entity/payment\";\r\n\r\nexport default class PaymentUtil {\r\n    \r\n    qrData: string | undefined;\r\n    // Função para gerar o payload PIX\r\n    async generatePixPayload(pixPayload : any) {\r\n        let payload = '000201'; // Versão do payload\r\n        payload += '010212'; // Indica chave PIX\r\n        payload += '26530014' + pixPayload.key.length + pixPayload.key; // Chave PIX\r\n        payload += '52040000'; // Indica valor do pagamento\r\n        payload += '5303986'; // Código correspondente à moeda BRL\r\n        payload += '5406' + pixPayload.amount.length + pixPayload.amount; // Valor do pagamento\r\n        payload += '5802BR'; // Código do país\r\n        payload += '5913' + pixPayload.name.length + pixPayload.name; // Nome do beneficiário/recebedor\r\n        payload += '6007' + pixPayload.city.length + pixPayload.city; // Cidade\r\n        payload += '62070503'; // Indica que é uma transação PIX\r\n        payload += '6304' + pixPayload.transactionId; // Identificador da transação\r\n        payload += '62' + pixPayload.description.length + pixPayload.description; // Descrição do pagamento\r\n    \r\n        return payload;\r\n    }\r\n    \r\n    // Função para gerar o QR code\r\n    async generateQRCode(payment: Payment) : Promise<string> {\r\n        const pixPayload = {\r\n            version: '1',\r\n            key: 'chave_pix_recebedo',\r\n            name: 'Fiap',\r\n            city: 'São Paulo',\r\n            transactionId: 'Transaction',\r\n            amount: payment.price,\r\n            description: 'Gerador da ordem de ' + payment.orderId\r\n        };\r\n        const payload = await  this.generatePixPayload(pixPayload);\r\n        this.qrData = '000201' + payload.length.toString().padStart(2, '0') + payload;\r\n        \r\n        return this.qrData;\r\n    }\r\n}\r\n"]},"_coverageSchema":"1a1c01bbd47fc00a2c39e90264f33305004495a9","hash":"e4d3f7d1a66da162857919560a16e3f5a3c92e33","contentHash":"1fdd1954a4d2bb0e43b578d87ebda21a15941345c3638d4ba29a991f67de1d63"}}